{% extends 'SyliusWebBundle:Frontend:layout.html.twig' %}

{% set form = sylius_cart_form({'product': product}) %}

{% block content %}
	{% block breadcrums %}
		<ol class="breadcrumb">
			<li>Home</li>
			<li>{{ product.name }}</li>
		</ol>
	{% endblock %}
	<div class="productShow clearfix">
	    <div class="product">
	    	<img class="img-responsive{% if ((is_mobile()) and not(is_device('iPhone'))) %} {{ 'col-xs-5' }} {% endif %}" src="{{ product.image ? product.image.path|imagine_filter('sylius_400x400') : 'http://placehold.it/400x400' }}" alt="{{ product.name }}" />
			<div class="description{% if ((is_mobile()) and not(is_device('iPhone'))) %} {{ 'col-xs-5' }} {% endif %}">
			    <form action="{{ path('sylius_cart_item_add', {'id': product.id}) }}" method="post" class="clearfix form-horizontal">
			    <div class="name">{{ product.name }}</div>
			    <div class="manufacturer">{{ product.getManufacturer }}</div>
			    <div class="price">{{ product.price|sylius_price }}</div>
			    {% if product.hasVariants %}
			            {% if product.isVariantSelectionMethodChoice %}
			            <table class="table table-condensed">
			                <thead>
			                    <tr>
			                        <th></th>
			                        <th>{{ 'sylius.variant.price'|trans }}</th>
			                        <th></th>
			                    </tr>
			                </thead>
			                <tbody>
			                    {% for variant in product.variants if variant.available %}
			                    <tr>
			                        <td>
			                            {% if variant.presentation is empty %}
			                            <ul class="unstyled">
			                                {% for option in variant.options %}
			                                <li><strong>{{ option.presentation }}</strong>: {{ option.value }}</li>
			                                {% endfor %}
			                            </ul>
			                            {% else %}
			                                {{ variant.presentation }}
			                            {% endif %}
			                        </td>
			                        <td>
			                            <span class="label label-success">{{ variant.price|sylius_price }}</span>
			                        </td>
			                        <td>
			                        {% if sylius_inventory_is_available(variant) %}
			                            {{ form_widget(form.variant[loop.index0]) }}
			                        {% else %}
			                            <span class="label label-warning">{{ 'sylius.out_of_stock'|trans }}</span>
			                        {% endif %}
			                        </td>
			                    </tr>
			                    {% endfor %}
			                </tbody>
			            </table>
			            {% else %}
			                <div class="well clearfix">
			                    {{ form_widget(form.variant) }}
			                </div>
			            {% endif %}
			    {% endif %}
		        {% if not product.hasVariants and not sylius_inventory_is_available(product.masterVariant) %}
		            <span class="label label-warning">{{ 'sylius.out_of_stock'|trans }}</span>
		        {% else %}
		        <div class="quantity">
		            {{ form_row(form.quantity, {'attr': {'class': 'center-text'}, 'empty_value': '1'}) }}
		        </div>
		            {{ form_widget(form._token) }}
		            <br>
		            <br>
		            {% if sylius_is_restricted(product) %}
		            <button disabled="disabled" class="btn btn-success btn-lg btn-block">{{ 'sylius.product_not_available_in_zone'|trans }}</button>
		            {% else %}
		                <button type="submit" class="addToCart">ADD TO CART</button>
		            {% endif %}
		        {% endif %}
				</form>
			</div>
		</div>
		<div class="static1">
		</div>
	</div>
{% endblock %}
